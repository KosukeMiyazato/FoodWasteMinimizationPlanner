import React, { createContext, useContext, useState, ReactNode } from 'react';

export type Language = 'en' | 'ja' | 'it';

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string) => string;
}

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

const translations = {
  en: {
    // Header
    'app.title': 'Food Waste Optimizer',
    'app.subtitle': 'Minimize waste, maximize nutrition',
    'header.wasteReduction': 'Avg. Waste Reduction',
    
    // Navigation
    'nav.inventory': 'Inventory',
    'nav.recipes': 'Recipes',
    'nav.optimize': 'Optimize',
    'nav.mealPlan': 'Meal Plan',
    
    // Inventory
    'inventory.title': 'Inventory Management',
    'inventory.subtitle': 'Track your ingredients and expiration dates',
    'inventory.addItem': 'Add Item',
    'inventory.addNewItem': 'Add New Item',
    'inventory.itemName': 'Item name',
    'inventory.quantity': 'Quantity',
    'inventory.unit': 'Unit',
    'inventory.category': 'Category',
    'inventory.daysLeft': 'Days left',
    'inventory.expiresIn': 'Expires in:',
    'inventory.day': 'day',
    'inventory.days': 'days',
    'inventory.urgent': 'urgent',
    'inventory.noItems': 'No items in inventory',
    'inventory.noItemsDesc': 'Add your first item to get started with optimization',
    
    // Categories
    'category.vegetables': 'Vegetables',
    'category.meat': 'Meat',
    'category.dairy': 'Dairy',
    'category.grains': 'Grains',
    'category.fruits': 'Fruits',
    'category.other': 'Other',
    
    // Units
    'unit.pieces': 'Pieces',
    'unit.g': 'Grams',
    'unit.ml': 'Milliliters',
    'unit.cups': 'Cups',
    'unit.tbsp': 'Tablespoons',
    
    // Recipe Categories
    'recipeCategory.breakfast': 'Breakfast',
    'recipeCategory.lunch': 'Lunch',
    'recipeCategory.dinner': 'Dinner',
    'recipeCategory.main': 'Main',
    'recipeCategory.soup': 'Soup',
    'recipeCategory.snack': 'Snack',
    'recipeCategory.dessert': 'Dessert',
    
    // Recipes
    'recipes.title': 'Recipe Database',
    'recipes.subtitle': 'Manage your recipes and check ingredient availability',
    'recipes.addRecipe': 'Add Recipe',
    'recipes.addNewRecipe': 'Add New Recipe',
    'recipes.recipeName': 'Recipe name',
    'recipes.servings': 'Servings',
    'recipes.prepTime': 'Prep time (min)',
    'recipes.ingredients': 'Ingredients',
    'recipes.addIngredient': 'Add Ingredient',
    'recipes.ingredientName': 'Ingredient Name',
    'recipes.action': 'Action',
    'recipes.nutrition': 'Nutrition (per serving)',
    'recipes.calories': 'Calories',
    'recipes.protein': 'Protein (g)',
    'recipes.carbs': 'Carbs (g)',
    'recipes.fat': 'Fat (g)',
    'recipes.allRecipes': 'All Recipes',
    'recipes.ingredientsAvailable': 'ingredients available',
    'recipes.serving': 'serving',
    'recipes.min': 'min',
    'recipes.cal': 'cal',
    'recipes.protein_short': 'protein',
    'recipes.carbs_short': 'carbs',
    'recipes.fat_short': 'fat',
    'recipes.noRecipes': 'No recipes found',
    'recipes.noRecipesDesc': 'Add your first recipe to get started',
    'recipes.noRecipesCategory': 'recipes available',
    
    // Optimization
    'optimize.title': 'Optimization Engine',
    'optimize.subtitle': 'Configure constraints and run waste minimization',
    'optimize.constraints': 'Optimization Constraints',
    'optimize.minServings': 'Minimum Total Servings',
    'optimize.minServingsDesc': 'Ensure adequate meal quantity',
    'optimize.maxDishes': 'Maximum Distinct Dishes',
    'optimize.maxDishesDesc': 'Control cooking complexity',
    'optimize.targetCalories': 'Target Daily Calories',
    'optimize.targetCaloriesDesc': 'Nutritional goal',
    'optimize.minProtein': 'Minimum Protein (g)',
    'optimize.minProteinDesc': 'Essential nutrient requirement',
    'optimize.runOptimization': 'Run Optimization',
    'optimize.optimizing': 'Optimizing...',
    'optimize.mathModel': 'Mathematical Model Details',
    'optimize.showMathModel': 'Show Mathematical Model Details',
    'optimize.hideMathModel': 'Hide Mathematical Model Details',
    'optimize.inventoryStatus': 'Inventory Status',
    'optimize.totalItems': 'Total Items',
    'optimize.urgentItems': 'Urgent (≤3 days)',
    'optimize.availableRecipes': 'Available Recipes',
    'optimize.goals': 'Optimization Goals',
    'optimize.minimizeWaste': 'Minimize food waste',
    'optimize.prioritizeUrgent': 'Prioritize urgent items',
    'optimize.meetNutrition': 'Meet nutrition targets',
    
    // Mathematical Model
    'mathModel.title': 'Mathematical Optimization Model for Food Waste Minimization',
    'mathModel.introduction': 'This system employs advanced mathematical optimization techniques based on Integer Linear Programming (ILP) to generate optimal meal plans that minimize food waste.',
    'mathModel.theoreticalBackground': 'Theoretical Background:',
    'mathModel.backgroundDesc': 'Food waste problems can be mathematically modeled as resource allocation problems that efficiently distribute limited resources (food inventory). By incorporating waste costs due to expiration as weighted penalties in the objective function, we seek optimal solutions that prioritize the use of urgent ingredients.',
    'mathModel.formulation': 'Mathematical Model Formulation',
    'mathModel.decisionVariables': 'Decision Variables',
    'mathModel.recipeCount': 'Number of times recipe r is prepared (integer variable)',
    'mathModel.wasteAmount': 'Amount of ingredient i wasted (continuous variable)',
    'mathModel.recipeBinary': 'Whether to prepare recipe r or not (binary variable)',
    'mathModel.objectiveFunction': 'Objective Function',
    'mathModel.wasteCost': 'Waste cost (weighted by expiration)',
    'mathModel.complexityPenalty': 'Work complexity penalty (ε = 1e-3)',
    'mathModel.weightFunction': 'Expiration Weight Function',
    'mathModel.weightDesc': 'Ingredients closer to expiration have higher weights and are used preferentially.',
    'mathModel.constraints': 'Constraints',
    'mathModel.inventoryBalance': 'Inventory Balance Constraint',
    'mathModel.inventoryDesc': 'For each ingredient i, usage + waste = inventory holds',
    'mathModel.demandConstraint': 'Demand Constraint',
    'mathModel.demandDesc': 'Meet minimum required servings',
    'mathModel.complexityConstraint': 'Complexity Constraint',
    'mathModel.complexityDesc': 'Limit the number of dish types',
    'mathModel.logicalConstraint': 'Logical Constraint',
    'mathModel.logicalDesc': 'x_r > 0 is possible only when preparing recipe r (M: sufficiently large constant)',
    'mathModel.nutritionConstraint': 'Nutrition Constraints',
    'mathModel.nutritionDesc': 'Ensure nutritional balance',
    'mathModel.solutionAlgorithm': 'Solution Algorithm',
    'mathModel.hybridOptimization': 'Hybrid Optimization Method',
    'mathModel.hybridDesc': 'Since complete ILP solving requires enormous computational resources, we adopt the following staged approach:',
    'mathModel.preprocessing': 'Preprocessing: Exclude infeasible recipes',
    'mathModel.initialSolution': 'Initial solution generation: Construct feasible solution using greedy method',
    'mathModel.localSearch': 'Local search: Improve solution using 2-opt style neighborhood search',
    'mathModel.feasibilityCheck': 'Feasibility check: Verify satisfaction of all constraints',
    'mathModel.priorityFunction': 'Greedy Method Priority Function',
    'mathModel.priorityDesc': 'Prioritize recipes that use many high-waste-risk ingredients and have short preparation times',
    'mathModel.complexity': 'Computational Complexity and Performance',
    'mathModel.theoreticalComplexity': 'Theoretical Complexity',
    'mathModel.completeILP': 'Complete ILP: O(2^n) - NP-hard',
    'mathModel.greedyMethod': 'Greedy method: O(n log n)',
    'mathModel.localSearchComplexity': 'Local search: O(n²)',
    'mathModel.overallComplexity': 'Overall: O(n²) - Polynomial time',
    'mathModel.practicalPerformance': 'Practical Performance',
    'mathModel.ingredientCapacity': 'Ingredients: Up to ~100 items',
    'mathModel.recipeCapacity': 'Recipes: Up to ~50 types',
    'mathModel.computationTime': 'Computation time: &lt; 2 seconds (typical case)',
    'mathModel.optimality': 'Optimality: 95%+ approximation accuracy',
    'mathModel.practicalBenefits': 'Practical Benefits',
    'mathModel.wasteReduction': 'Average waste reduction',
    'mathModel.nutritionAchievement': 'Nutrition goal achievement rate',
    'mathModel.averageDishes': 'Average number of dishes',
    'mathModel.references': 'References & Theoretical Foundation',
    'mathModel.algorithmSteps': 'Algorithm Execution Steps',
    'mathModel.step1': 'Extract feasible recipes (inventory constraint check)',
    'mathModel.step2': 'Priority calculation: urgency_score / prep_time',
    'mathModel.step3': 'Greedy selection: Sequential selection from high-priority recipes',
    'mathModel.step4': 'Local search: Adjust counts between recipes',
    'mathModel.step5': 'Constraint satisfaction check and solution evaluation',
    'mathModel.step6': 'Construct optimal solution and output results',
    
    // Meal Plan
    'mealPlan.title': 'Optimized Meal Plan',
    'mealPlan.subtitle': 'Your waste-minimizing meal strategy',
    'mealPlan.efficiency': 'Efficiency',
    'mealPlan.wasteScore': 'Waste Score',
    'mealPlan.totalServings': 'Total Servings',
    'mealPlan.distinctDishes': 'Distinct Dishes',
    'mealPlan.totalCalories': 'Total Calories',
    'mealPlan.recommendedMeals': 'Recommended Meals',
    'mealPlan.nutritionSummary': 'Nutrition Summary',
    'mealPlan.wasteEstimation': 'Waste Estimation',
    'mealPlan.ingredientsNeeded': 'Ingredients needed:',
    'mealPlan.leftover': 'leftover',
    'mealPlan.perfectUtilization': 'Perfect utilization!',
    'mealPlan.allIngredientsUsed': 'All ingredients will be used',
    'mealPlan.noMealPlan': 'No meal plan generated',
    'mealPlan.noMealPlanDesc': 'Run the optimization engine to generate an optimal meal plan',
    
    // Common
    'common.add': 'Add',
    'common.cancel': 'Cancel',
    'common.delete': 'Delete',
    'common.edit': 'Edit',
    'common.save': 'Save',
    'common.close': 'Close',
    
    // Account Management
    'account.title': 'Account Management',
    'account.subtitle': 'Profile and security settings',
    'account.profile': 'Profile',
    'account.security': 'Security',
    'account.profileInfo': 'Profile Information',
    'account.profileDesc': 'View your basic account information',
    'account.userId': 'User ID',
    'account.userIdDesc': 'User ID cannot be changed',
    'account.accountCreated': 'Account Created',
    'account.lastLogin': 'Last Login',
    'account.securitySettings': 'Security Settings',
    'account.securityDesc': 'Change your password',
    'account.password': 'Password',
    'account.passwordLastChanged': 'Last changed 30 days ago',
    'account.changePassword': 'Change Password',
    'account.currentPassword': 'Current Password',
    'account.newPassword': 'New Password',
    'account.confirmPassword': 'Confirm Password',
    'account.enterCurrentPassword': 'Enter current password',
    'account.enterNewPassword': 'Enter new password',
    'account.reenterNewPassword': 'Re-enter new password',
    'account.passwordRequirements': 'Password Requirements',
    'account.minLength': '8 characters minimum',
    'account.uppercase': 'Include uppercase letter',
    'account.lowercase': 'Include lowercase letter',
    'account.number': 'Include number',
    'account.special': 'Include special character',
    'account.passwordsMatch': 'Passwords match',
    'account.securityTips': 'Security Tips',
    'account.tip1': '• Change your password regularly',
    'account.tip2': '• Do not use the same password as other services',
    'account.tip3': '• Use 8+ characters with uppercase, lowercase, numbers, and symbols',
    'account.tip4': '• Avoid strings related to personal information',
    'account.backToHome': 'Back to Home',
    'account.userNotFound': 'User information not found',
    'account.passwordChangeSuccess': 'Password changed successfully',
    'account.passwordChangeFailed': 'Failed to change password',
    'account.enterCurrentPasswordError': 'Please enter your current password',
    'account.newPasswordLengthError': 'New password must be at least 6 characters',
    'account.passwordMismatchError': 'Passwords do not match',
    'account.error': 'Error',
    'account.invalidLink': 'Invalid or expired link',
  },
  it: {
    // Header
    'app.title': 'Ottimizzatore Spreco Alimentare',
    'app.subtitle': 'Minimizza gli sprechi, massimizza la nutrizione',
    'header.wasteReduction': 'Riduzione Media Sprechi',
    
    // Navigation
    'nav.inventory': 'Inventario',
    'nav.recipes': 'Ricette',
    'nav.optimize': 'Ottimizza',
    'nav.mealPlan': 'Piano Pasti',
    
    // Inventory
    'inventory.title': 'Gestione Inventario',
    'inventory.subtitle': 'Traccia i tuoi ingredienti e le date di scadenza',
    'inventory.addItem': 'Aggiungi Articolo',
    'inventory.addNewItem': 'Aggiungi Nuovo Articolo',
    'inventory.itemName': 'Nome articolo',
    'inventory.quantity': 'Quantità',
    'inventory.unit': 'Unità',
    'inventory.category': 'Categoria',
    'inventory.daysLeft': 'Giorni rimanenti',
    'inventory.expiresIn': 'Scade tra:',
    'inventory.day': 'giorno',
    'inventory.days': 'giorni',
    'inventory.urgent': 'urgente',
    'inventory.noItems': 'Nessun articolo nell\'inventario',
    'inventory.noItemsDesc': 'Aggiungi il tuo primo articolo per iniziare l\'ottimizzazione',
    
    // Categories
    'category.vegetables': 'Verdure',
    'category.meat': 'Carne',
    'category.dairy': 'Latticini',
    'category.grains': 'Cereali',
    'category.fruits': 'Frutta',
    'category.other': 'Altro',
    
    // Units
    'unit.pieces': 'Pezzi',
    'unit.g': 'Grammi',
    'unit.ml': 'Millilitri',
    'unit.cups': 'Tazze',
    'unit.tbsp': 'Cucchiai',
    
    // Recipe Categories
    'recipeCategory.breakfast': 'Colazione',
    'recipeCategory.lunch': 'Pranzo',
    'recipeCategory.dinner': 'Cena',
    'recipeCategory.main': 'Principale',
    'recipeCategory.soup': 'Zuppa',
    'recipeCategory.snack': 'Spuntino',
    'recipeCategory.dessert': 'Dolce',
    
    // Recipes
    'recipes.title': 'Database Ricette',
    'recipes.subtitle': 'Gestisci le tue ricette e controlla la disponibilità degli ingredienti',
    'recipes.basicInfo': 'Informazioni Base',
    'recipes.addRecipe': 'Aggiungi Ricetta',
    'recipes.addNewRecipe': 'Aggiungi Nuova Ricetta',
    'recipes.recipeName': 'Nome ricetta',
    'recipes.servings': 'Porzioni',
    'recipes.prepTime': 'Tempo preparazione (min)',
    'recipes.ingredients': 'Ingredienti',
    'recipes.addIngredient': 'Aggiungi Ingrediente',
    'recipes.ingredientName': 'Nome Ingrediente',
    'recipes.action': 'Azione',
    'recipes.nutrition': 'Nutrizione (per porzione)',
    'recipes.calories': 'Calorie',
    'recipes.protein': 'Proteine (g)',
    'recipes.carbs': 'Carboidrati (g)',
    'recipes.fat': 'Grassi (g)',
    'recipes.allRecipes': 'Tutte le Ricette',
    'recipes.ingredientsAvailable': 'ingredienti disponibili',
    'recipes.serving': 'porzione',
    'recipes.min': 'min',
    'recipes.cal': 'cal',
    'recipes.protein_short': 'proteine',
    'recipes.carbs_short': 'carboidrati',
    'recipes.fat_short': 'grassi',
    'recipes.noRecipes': 'Nessuna ricetta trovata',
    'recipes.noRecipesDesc': 'Aggiungi la tua prima ricetta per iniziare',
    'recipes.noRecipesCategory': 'ricette disponibili',
    
    // Optimization
    'optimize.title': 'Motore di Ottimizzazione',
    'optimize.subtitle': 'Configura i vincoli ed esegui la minimizzazione degli sprechi',
    'optimize.constraints': 'Vincoli di Ottimizzazione',
    'optimize.minServings': 'Porzioni Totali Minime',
    'optimize.minServingsDesc': 'Garantisci quantità adeguata di pasti',
    'optimize.maxDishes': 'Piatti Distinti Massimi',
    'optimize.maxDishesDesc': 'Controlla la complessità di cottura',
    'optimize.targetCalories': 'Calorie Giornaliere Target',
    'optimize.targetCaloriesDesc': 'Obiettivo nutrizionale',
    'optimize.minProtein': 'Proteine Minime (g)',
    'optimize.minProteinDesc': 'Requisito nutriente essenziale',
    'optimize.runOptimization': 'Esegui Ottimizzazione',
    'optimize.optimizing': 'Ottimizzazione in corso...',
    'optimize.mathModel': 'Dettagli Modello Matematico',
    'optimize.showMathModel': 'Mostra Dettagli Modello Matematico',
    'optimize.hideMathModel': 'Nascondi Dettagli Modello Matematico',
    'optimize.inventoryStatus': 'Stato Inventario',
    'optimize.totalItems': 'Articoli Totali',
    'optimize.urgentItems': 'Urgenti (≤3 giorni)',
    'optimize.availableRecipes': 'Ricette Disponibili',
    'optimize.goals': 'Obiettivi di Ottimizzazione',
    'optimize.minimizeWaste': 'Minimizza spreco alimentare',
    'optimize.prioritizeUrgent': 'Priorità agli articoli urgenti',
    'optimize.meetNutrition': 'Raggiungi obiettivi nutrizionali',
    
    // Mathematical Model
    'mathModel.title': 'Modello di Ottimizzazione Matematica per la Minimizzazione degli Sprechi Alimentari',
    'mathModel.introduction': 'Questo sistema utilizza tecniche avanzate di ottimizzazione matematica basate sulla Programmazione Lineare Intera (ILP) per generare piani pasto ottimali che minimizzano gli sprechi alimentari.',
    'mathModel.theoreticalBackground': 'Background Teorico:',
    'mathModel.backgroundDesc': 'I problemi di spreco alimentare possono essere modellati matematicamente come problemi di allocazione delle risorse che distribuiscono efficientemente risorse limitate (inventario alimentare). Incorporando i costi di spreco dovuti alla scadenza come penalità ponderate nella funzione obiettivo, cerchiamo soluzioni ottimali che prioritizzano l\'uso di ingredienti urgenti.',
    'mathModel.formulation': 'Formulazione del Modello Matematico',
    'mathModel.decisionVariables': 'Variabili Decisionali',
    'mathModel.recipeCount': 'Numero di volte che la ricetta r viene preparata (variabile intera)',
    'mathModel.wasteAmount': 'Quantità di ingrediente i sprecato (variabile continua)',
    'mathModel.recipeBinary': 'Se preparare o meno la ricetta r (variabile binaria)',
    'mathModel.objectiveFunction': 'Funzione Obiettivo',
    'mathModel.wasteCost': 'Costo spreco (ponderato per scadenza)',
    'mathModel.complexityPenalty': 'Penalità complessità lavoro (ε = 1e-3)',
    'mathModel.weightFunction': 'Funzione Peso Scadenza',
    'mathModel.weightDesc': 'Gli ingredienti più vicini alla scadenza hanno pesi maggiori e vengono utilizzati preferenzialmente.',
    'mathModel.constraints': 'Vincoli',
    'mathModel.inventoryBalance': 'Vincolo Bilancio Inventario',
    'mathModel.inventoryDesc': 'Per ogni ingrediente i, utilizzo + spreco = inventario',
    'mathModel.demandConstraint': 'Vincolo Domanda',
    'mathModel.demandDesc': 'Soddisfa le porzioni minime richieste',
    'mathModel.complexityConstraint': 'Vincolo Complessità',
    'mathModel.complexityDesc': 'Limita il numero di tipi di piatti',
    'mathModel.logicalConstraint': 'Vincolo Logico',
    'mathModel.logicalDesc': 'x_r > 0 è possibile solo quando si prepara la ricetta r (M: costante sufficientemente grande)',
    'mathModel.nutritionConstraint': 'Vincoli Nutrizionali',
    'mathModel.nutritionDesc': 'Garantisce equilibrio nutrizionale',
    'mathModel.solutionAlgorithm': 'Algoritmo di Soluzione',
    'mathModel.hybridOptimization': 'Metodo di Ottimizzazione Ibrido',
    'mathModel.hybridDesc': 'Poiché la risoluzione completa ILP richiede enormi risorse computazionali, adottiamo il seguente approccio a fasi:',
    'mathModel.preprocessing': 'Preprocessing: Esclude ricette non fattibili',
    'mathModel.initialSolution': 'Generazione soluzione iniziale: Costruisce soluzione fattibile usando metodo greedy',
    'mathModel.localSearch': 'Ricerca locale: Migliora soluzione usando ricerca di vicinato stile 2-opt',
    'mathModel.feasibilityCheck': 'Controllo fattibilità: Verifica soddisfazione di tutti i vincoli',
    'mathModel.priorityFunction': 'Funzione Priorità Metodo Greedy',
    'mathModel.priorityDesc': 'Prioritizza ricette che usano molti ingredienti ad alto rischio spreco e hanno tempi di preparazione brevi',
    'mathModel.complexity': 'Complessità Computazionale e Prestazioni',
    'mathModel.theoreticalComplexity': 'Complessità Teorica',
    'mathModel.completeILP': 'ILP completo: O(2^n) - NP-difficile',
    'mathModel.greedyMethod': 'Metodo greedy: O(n log n)',
    'mathModel.localSearchComplexity': 'Ricerca locale: O(n²)',
    'mathModel.overallComplexity': 'Complessivo: O(n²) - Tempo polinomiale',
    'mathModel.practicalPerformance': 'Prestazioni Pratiche',
    'mathModel.ingredientCapacity': 'Ingredienti: Fino a ~100 articoli',
    'mathModel.recipeCapacity': 'Ricette: Fino a ~50 tipi',
    'mathModel.computationTime': 'Tempo calcolo: < 2 secondi (caso tipico)',
    'mathModel.optimality': 'Ottimalità: Precisione approssimazione 95%+',
    'mathModel.practicalBenefits': 'Benefici Pratici',
    'mathModel.wasteReduction': 'Riduzione media sprechi',
    'mathModel.nutritionAchievement': 'Tasso raggiungimento obiettivi nutrizionali',
    'mathModel.averageDishes': 'Numero medio di piatti',
    'mathModel.references': 'Riferimenti e Fondamenti Teorici',
    'mathModel.algorithmSteps': 'Passi Esecuzione Algoritmo',
    'mathModel.step1': 'Estrai ricette fattibili (controllo vincoli inventario)',
    'mathModel.step2': 'Calcolo priorità: punteggio_urgenza / tempo_prep',
    'mathModel.step3': 'Selezione greedy: Selezione sequenziale da ricette ad alta priorità',
    'mathModel.step4': 'Ricerca locale: Aggiusta conteggi tra ricette',
    'mathModel.step5': 'Controllo soddisfazione vincoli e valutazione soluzione',
    'mathModel.step6': 'Costruisci soluzione ottimale e output risultati',
    
    // Meal Plan
    'mealPlan.title': 'Piano Pasto Ottimizzato',
    'mealPlan.subtitle': 'La tua strategia pasto anti-spreco',
    'mealPlan.efficiency': 'Efficienza',
    'mealPlan.wasteScore': 'Punteggio Spreco',
    'mealPlan.totalServings': 'Porzioni Totali',
    'mealPlan.distinctDishes': 'Piatti Distinti',
    'mealPlan.totalCalories': 'Calorie Totali',
    'mealPlan.recommendedMeals': 'Pasti Raccomandati',
    'mealPlan.nutritionSummary': 'Riassunto Nutrizionale',
    'mealPlan.wasteEstimation': 'Stima Sprechi',
    'mealPlan.ingredientsNeeded': 'Ingredienti necessari:',
    'mealPlan.leftover': 'avanzo',
    'mealPlan.perfectUtilization': 'Utilizzo perfetto!',
    'mealPlan.allIngredientsUsed': 'Tutti gli ingredienti saranno utilizzati',
    'mealPlan.noMealPlan': 'Nessun piano pasto generato',
    'mealPlan.noMealPlanDesc': 'Esegui il motore di ottimizzazione per generare un piano pasto ottimale',
    
    // Common
    'common.add': 'Aggiungi',
    'common.cancel': 'Annulla',
    'common.delete': 'Elimina',
    'common.edit': 'Modifica',
    'common.save': 'Salva',
    'common.close': 'Chiudi',
    'common.first': 'Primo',
    'common.second': 'Secondo',
    'common.preprocessing': 'Preprocessing',
    'common.initialSolution': 'Soluzione iniziale',
    'common.localSearch': 'Ricerca locale',
    'common.feasibilityCheck': 'Controllo fattibilità',
    
    // Account Management
    'account.title': 'Gestione Account',
    'account.subtitle': 'Impostazioni profilo e sicurezza',
    'account.profile': 'Profilo',
    'account.security': 'Sicurezza',
    'account.profileInfo': 'Informazioni Profilo',
    'account.profileDesc': 'Visualizza le informazioni base del tuo account',
    'account.userId': 'ID Utente',
    'account.userIdDesc': 'L\'ID utente non può essere modificato',
    'account.accountCreated': 'Account Creato',
    'account.lastLogin': 'Ultimo Accesso',
    'account.securitySettings': 'Impostazioni Sicurezza',
    'account.securityDesc': 'Cambia la tua password',
    'account.password': 'Password',
    'account.passwordLastChanged': 'Ultima modifica 30 giorni fa',
    'account.changePassword': 'Cambia Password',
    'account.currentPassword': 'Password Attuale',
    'account.newPassword': 'Nuova Password',
    'account.confirmPassword': 'Conferma Password',
    'account.enterCurrentPassword': 'Inserisci password attuale',
    'account.enterNewPassword': 'Inserisci nuova password',
    'account.reenterNewPassword': 'Reinserisci nuova password',
    'account.passwordRequirements': 'Requisiti Password',
    'account.minLength': '8 caratteri minimo',
    'account.uppercase': 'Includi lettera maiuscola',
    'account.lowercase': 'Includi lettera minuscola',
    'account.number': 'Includi numero',
    'account.special': 'Includi carattere speciale',
    'account.passwordsMatch': 'Le password corrispondono',
    'account.securityTips': 'Consigli Sicurezza',
    'account.tip1': '• Cambia regolarmente la tua password',
    'account.tip2': '• Non usare la stessa password di altri servizi',
    'account.tip3': '• Usa 8+ caratteri con maiuscole, minuscole, numeri e simboli',
    'account.tip4': '• Evita stringhe relative a informazioni personali',
    'account.backToHome': 'Torna alla Home',
    'account.userNotFound': 'Informazioni utente non trovate',
    'account.passwordChangeSuccess': 'Password cambiata con successo',
    'account.passwordChangeFailed': 'Cambio password fallito',
    'account.enterCurrentPasswordError': 'Inserisci la tua password attuale',
    'account.newPasswordLengthError': 'La nuova password deve essere di almeno 6 caratteri',
    'account.passwordMismatchError': 'Le password non corrispondono',
    'account.error': 'Errore',
    'account.invalidLink': 'Link non valido o scaduto',
  },
  ja: {
    // Header
    'app.title': '食品廃棄最適化システム',
    'app.subtitle': '廃棄を最小化し、栄養を最大化',
    'header.wasteReduction': '平均廃棄削減率',
    
    // Navigation
    'nav.inventory': '在庫管理',
    'nav.recipes': 'レシピ',
    'nav.optimize': '最適化',
    'nav.mealPlan': '食事計画',
    
    // Inventory
    'inventory.title': '在庫管理',
    'inventory.subtitle': '食材と賞味期限を管理します',
    'inventory.addItem': 'アイテム追加',
    'inventory.addNewItem': '新しいアイテムを追加',
    'inventory.itemName': 'アイテム名',
    'inventory.quantity': '数量',
    'inventory.unit': '単位',
    'inventory.category': 'カテゴリ',
    'inventory.daysLeft': '残り日数',
    'inventory.expiresIn': '期限まで:',
    'inventory.day': '日',
    'inventory.days': '日',
    'inventory.urgent': '緊急',
    'inventory.noItems': '在庫がありません',
    'inventory.noItemsDesc': '最初のアイテムを追加して最適化を開始してください',
    
    // Categories
    'category.vegetables': '野菜',
    'category.meat': '肉類',
    'category.dairy': '乳製品',
    'category.grains': '穀物',
    'category.fruits': '果物',
    'category.other': 'その他',
    
    // Units
    'unit.pieces': '個',
    'unit.g': 'グラム',
    'unit.ml': 'ミリリットル',
    'unit.cups': 'カップ',
    'unit.tbsp': '大さじ',
    
    // Recipe Categories
    'recipeCategory.breakfast': '朝食',
    'recipeCategory.lunch': '昼食',
    'recipeCategory.dinner': '夕食',
    'recipeCategory.main': 'メイン',
    'recipeCategory.soup': 'スープ',
    'recipeCategory.snack': 'スナック',
    'recipeCategory.dessert': 'デザート',
    
    // Recipes
    'recipes.title': 'レシピデータベース',
    'recipes.subtitle': 'レシピを管理し、材料の在庫状況を確認します',
    'recipes.basicInfo': '基本情報',
    'recipes.addRecipe': 'レシピ追加',
    'recipes.addNewRecipe': '新しいレシピを追加',
    'recipes.recipeName': 'レシピ名',
    'recipes.servings': '人分',
    'recipes.prepTime': '調理時間（分）',
    'recipes.ingredients': '材料',
    'recipes.addIngredient': '材料を追加',
    'recipes.ingredientName': '材料名',
    'recipes.action': '操作',
    'recipes.nutrition': '栄養成分（1人分）',
    'recipes.calories': 'カロリー',
    'recipes.protein': 'タンパク質（g）',
    'recipes.carbs': '炭水化物（g）',
    'recipes.fat': '脂質（g）',
    'recipes.allRecipes': '全レシピ',
    'recipes.ingredientsAvailable': '材料が利用可能',
    'recipes.serving': '人分',
    'recipes.min': '分',
    'recipes.cal': 'kcal',
    'recipes.protein_short': 'タンパク質',
    'recipes.carbs_short': '炭水化物',
    'recipes.fat_short': '脂質',
    'recipes.noRecipes': 'レシピが見つかりません',
    'recipes.noRecipesDesc': '最初のレシピを追加してください',
    'recipes.noRecipesCategory': 'のレシピがありません',
    
    // Optimization
    'optimize.title': '最適化エンジン',
    'optimize.subtitle': '制約を設定して廃棄最小化を実行します',
    'optimize.constraints': '最適化制約',
    'optimize.minServings': '最小総人分数',
    'optimize.minServingsDesc': '十分な食事量を確保',
    'optimize.maxDishes': '最大料理数',
    'optimize.maxDishesDesc': '調理の複雑さを制御',
    'optimize.targetCalories': '目標カロリー',
    'optimize.targetCaloriesDesc': '栄養目標',
    'optimize.minProtein': '最小タンパク質（g）',
    'optimize.minProteinDesc': '必須栄養素要件',
    'optimize.runOptimization': '最適化実行',
    'optimize.optimizing': '最適化中...',
    'optimize.mathModel': '数理モデル詳細',
    'optimize.showMathModel': '数理モデル詳細を表示',
    'optimize.hideMathModel': '数理モデル詳細を非表示',
    'optimize.inventoryStatus': '在庫状況',
    'optimize.totalItems': '総アイテム数',
    'optimize.urgentItems': '緊急（≤3日）',
    'optimize.availableRecipes': '利用可能レシピ',
    'optimize.goals': '最適化目標',
    'optimize.minimizeWaste': '食品廃棄を最小化',
    'optimize.prioritizeUrgent': '緊急アイテムを優先',
    'optimize.meetNutrition': '栄養目標を達成',
    
    // Mathematical Model
    'mathModel.title': '食品廃棄最小化のための数理最適化モデル',
    'mathModel.introduction': '本システムでは、整数線形計画法（Integer Linear Programming, ILP）を基盤とした高度な数理最適化手法を用いて、食品廃棄を最小化する最適な食事計画を生成します。',
    'mathModel.theoreticalBackground': '理論的背景：',
    'mathModel.backgroundDesc': '食品廃棄問題は、限られた資源（食材在庫）を効率的に配分する資源配分問題として数学的にモデル化できます。期限切れによる廃棄コストを重み付きペナルティとして目的関数に組み込むことで、緊急度の高い食材を優先的に使用する最適解を求めます。',
    'mathModel.formulation': '数理モデルの定式化',
    'mathModel.decisionVariables': '決定変数',
    'mathModel.recipeCount': 'レシピrの作成回数（整数変数）',
    'mathModel.wasteAmount': '食材iの廃棄量（連続変数）',
    'mathModel.recipeBinary': 'レシピrを作るかどうか（バイナリ変数）',
    'mathModel.objectiveFunction': '目的関数',
    'mathModel.wasteCost': '廃棄コスト（期限重み付き）',
    'mathModel.complexityPenalty': '作業複雑度ペナルティ（ε = 1e-3）',
    'mathModel.weightFunction': '期限重み関数',
    'mathModel.weightDesc': '期限が近い食材ほど高い重みを持ち、優先的に使用されます。',
    'mathModel.constraints': '制約条件',
    'mathModel.inventoryBalance': '在庫バランス制約',
    'mathModel.inventoryDesc': '各食材iについて、使用量 + 廃棄量 = 在庫量が成り立つ',
    'mathModel.demandConstraint': '需要制約',
    'mathModel.demandDesc': '最小必要サービング数を満たす',
    'mathModel.complexityConstraint': '複雑度制約',
    'mathModel.complexityDesc': '調理する料理の種類数を制限',
    'mathModel.logicalConstraint': '論理制約',
    'mathModel.logicalDesc': 'レシピrを作る場合のみx_r > 0が可能（M: 十分大きな定数）',
    'mathModel.nutritionConstraint': '栄養制約',
    'mathModel.nutritionDesc': '栄養バランスの確保',
    'mathModel.solutionAlgorithm': '解法アルゴリズム',
    'mathModel.hybridOptimization': 'ハイブリッド最適化手法',
    'mathModel.hybridDesc': '完全なILP求解は計算量が膨大になるため、以下の段階的アプローチを採用：',
    'mathModel.preprocessing': '前処理: 実行不可能レシピの除外',
    'mathModel.initialSolution': '初期解生成: 貪欲法による実行可能解の構築',
    'mathModel.localSearch': '局所探索: 2-opt風近傍探索による解の改善',
    'mathModel.feasibilityCheck': '制約充足確認: 全制約の満足度検証',
    'mathModel.priorityFunction': '貪欲法の優先度関数',
    'mathModel.priorityDesc': '廃棄リスクの高い食材を多く使用し、調理時間が短いレシピを優先',
    'mathModel.complexity': '計算複雑度と性能',
    'mathModel.theoreticalComplexity': '理論的複雑度',
    'mathModel.completeILP': '完全ILP: O(2^n) - NP困難',
    'mathModel.greedyMethod': '貪欲法: O(n log n)',
    'mathModel.localSearchComplexity': '局所探索: O(n²)',
    'mathModel.overallComplexity': '全体: O(n²) - 多項式時間',
    'mathModel.practicalPerformance': '実用性能',
    'mathModel.ingredientCapacity': '食材数: ~100項目まで対応',
    'mathModel.recipeCapacity': 'レシピ数: ~50種類まで対応',
    'mathModel.computationTime': '計算時間: &lt; 2秒（典型例）',
    'mathModel.optimality': '最適性: 95%以上の近似精度',
    'mathModel.practicalBenefits': '実用的効果',
    'mathModel.wasteReduction': '平均廃棄削減率',
    'mathModel.nutritionAchievement': '栄養目標達成率',
    'mathModel.averageDishes': '平均料理数',
    'mathModel.references': '参考文献・理論的基盤',
    'mathModel.algorithmSteps': 'アルゴリズム実行手順',
    'mathModel.step1': '実行可能レシピの抽出（在庫制約チェック）',
    'mathModel.step2': '優先度計算: urgency_score / prep_time',
    'mathModel.step3': '貪欲選択: 高優先度レシピから順次選択',
    'mathModel.step4': '局所探索: レシピ間での回数調整',
    'mathModel.step5': '制約充足性確認と解の評価',
    'mathModel.step6': '最適解の構築と結果出力',
    
    // Meal Plan
    'mealPlan.title': '最適化された食事計画',
    'mealPlan.subtitle': '廃棄最小化食事戦略',
    'mealPlan.efficiency': '効率性',
    'mealPlan.wasteScore': '廃棄スコア',
    'mealPlan.totalServings': '総人分数',
    'mealPlan.distinctDishes': '料理数',
    'mealPlan.totalCalories': '総カロリー',
    'mealPlan.recommendedMeals': '推奨料理',
    'mealPlan.nutritionSummary': '栄養サマリー',
    'mealPlan.wasteEstimation': '廃棄予測',
    'mealPlan.ingredientsNeeded': '必要な材料:',
    'mealPlan.leftover': '余り',
    'mealPlan.perfectUtilization': '完全活用！',
    'mealPlan.allIngredientsUsed': 'すべての材料が使用されます',
    'mealPlan.noMealPlan': '食事計画が生成されていません',
    'mealPlan.noMealPlanDesc': '最適化エンジンを実行して最適な食事計画を生成してください',
    
    // Common
    'common.add': '追加',
    'common.cancel': 'キャンセル',
    'common.delete': '削除',
    'common.edit': '編集',
    'common.save': '保存',
    'common.close': '閉じる',
    
    // Account Management
    'account.title': 'アカウント管理',
    'account.subtitle': 'プロフィールとセキュリティ設定',
    'account.profile': 'プロフィール',
    'account.security': 'セキュリティ',
    'account.profileInfo': 'プロフィール情報',
    'account.profileDesc': 'アカウントの基本情報を確認できます',
    'account.userId': 'ユーザーID',
    'account.userIdDesc': 'ユーザーIDは変更できません',
    'account.accountCreated': 'アカウント作成日',
    'account.lastLogin': '最終ログイン',
    'account.securitySettings': 'セキュリティ設定',
    'account.securityDesc': 'パスワードの変更ができます',
    'account.password': 'パスワード',
    'account.passwordLastChanged': '最後に変更されたのは30日前です',
    'account.changePassword': 'パスワードを変更',
    'account.currentPassword': '現在のパスワード',
    'account.newPassword': '新しいパスワード',
    'account.confirmPassword': '新しいパスワード（確認）',
    'account.enterCurrentPassword': '現在のパスワードを入力',
    'account.enterNewPassword': '新しいパスワードを入力',
    'account.reenterNewPassword': '新しいパスワードを再入力',
    'account.passwordRequirements': 'パスワード要件',
    'account.minLength': '8文字以上',
    'account.uppercase': '大文字を含む',
    'account.lowercase': '小文字を含む',
    'account.number': '数字を含む',
    'account.special': '特殊文字を含む',
    'account.passwordsMatch': 'パスワードが一致',
    'account.securityTips': 'セキュリティのヒント',
    'account.tip1': '• 定期的にパスワードを変更してください',
    'account.tip2': '• 他のサービスと同じパスワードは使用しないでください',
    'account.tip3': '• 8文字以上で大文字・小文字・数字・記号を含めてください',
    'account.tip4': '• 個人情報に関連する文字列は避けてください',
    'account.backToHome': 'ホームに戻る',
    'account.userNotFound': 'ユーザー情報が見つかりません',
    'account.passwordChangeSuccess': 'パスワードが正常に変更されました',
    'account.passwordChangeFailed': 'パスワード変更に失敗しました',
    'account.enterCurrentPasswordError': '現在のパスワードを入力してください',
    'account.newPasswordLengthError': '新しいパスワードは6文字以上で入力してください',
    'account.passwordMismatchError': 'パスワードが一致しません',
    'account.error': 'エラー',
    'account.invalidLink': '無効または期限切れのリンクです',
  }
};

export const LanguageProvider: React.FC<{ children: ReactNode }> = ({ children }) => {
  const [language, setLanguage] = useState<Language>('en');

  const t = (key: string): string => {
    return translations[language][key as keyof typeof translations[typeof language]] || key;
  };

  return (
    <LanguageContext.Provider value={{ language, setLanguage, t }}>
      {children}
    </LanguageContext.Provider>
  );
};

export const useLanguage = () => {
  const context = useContext(LanguageContext);
  if (context === undefined) {
    throw new Error('useLanguage must be used within a LanguageProvider');
  }
  return context;
};